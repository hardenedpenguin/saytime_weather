#!/usr/bin/make -f
%:
	dh $@

override_dh_usrlocal:
	# Skip dh_usrlocal entirely since we handle /usr/local/sbin manually

override_dh_auto_install:
	dh_auto_install
	mkdir -p debian/saytime-weather/usr/local/sbin
	mkdir -p debian/saytime-weather/usr/share/asterisk/sounds/en/wx
	install -m 755 weather.pl debian/saytime-weather/usr/local/sbin/
	install -m 755 saytime.pl debian/saytime-weather/usr/local/sbin/
	# Install time-related sound files
	install -m 644 sounds/a-m.ulaw debian/saytime-weather/usr/share/asterisk/sounds/en/
	install -m 644 sounds/p-m.ulaw debian/saytime-weather/usr/share/asterisk/sounds/en/

	# Install weather-related sound files
	cd sounds && install -m 644 \
		breezy.ulaw \
		calm.ulaw \
		clear.ulaw \
		cloudy.ulaw \
		conditions.ulaw \
		degrees.ulaw \
		drizzle.ulaw \
		foggy.ulaw \
		gusty.ulaw \
		hail.ulaw \
		heavy.ulaw \
		light.ulaw \
		moderate.ulaw \
		mostly.ulaw \
		overcast.ulaw \
		partly.ulaw \
		rain.ulaw \
		showers.ulaw \
		sleet.ulaw \
		sunny.ulaw \
		temperature.ulaw \
		thunderstorms.ulaw \
		weather.ulaw \
		windy.ulaw \
		debian/saytime-weather/usr/share/asterisk/sounds/en/wx/

override_dh_fixperms:
	dh_fixperms
	# Set correct permissions and ownership
	chown -R asterisk:asterisk debian/saytime-weather/usr/local/sbin/*.pl
	chown -R asterisk:asterisk debian/saytime-weather/usr/share/asterisk/sounds/en